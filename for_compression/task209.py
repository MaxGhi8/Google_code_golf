def p(g,E=enumerate,R=range(12),S=sum):C=lambda g:g*any(g[0])or C([*zip(*filter(any,g))]);x,y=zip(*((x,y)for y,r in E(g)for x,c in E(r)if c==4));M=[r[x[0]:x[3]+1]for r in g[y[0]:y[3]+1]];P=C([[v*(j<x[0]or j>x[3]or i<y[0]or i>y[3])for j,v in E(r)]for i,r in E(g)]);return max((S(map(lambda x,y:0<x==y,S(M,[]),S(m:=[[4*(v==4)or([[*r]+[0]*99for r in P]+[[0]*99]*99)[(i-I)//s][(j-J)//s]for j,v in E(a)]for i,a in E(M)],[]))),-s,m)for s in[*R][1:]for I in R for J in R)[2]