def p(r):
 a=max(a+21for a in range(274)if sum(r,[])[a]==5==sum(r,[])[a+126]);n=sum(m:=[r[a%20:][:5]for r in r[a//20:][:5]],[])
 for i in range(256):
  i,g=i>>4,i&15
  for a in[*range(5)]*all(r[i+e//5][g+e%5]*max(n)==n[e]for e in range(25)):r[i+a][g:g+5]=m[a]
 return r
