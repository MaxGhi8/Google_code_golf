def p(e):n=e[0];l=n.index(m:=max(n))+1;t,o=map(min,zip(*((i,u)for i,r in enumerate(e)for u,p in enumerate(r)if p not in n)));return[[(p:=e[t+i*l][o+u*l])*all(m!=p==e[t+(i+n//2)*l][o+(u+n%2)*l]for n in range(4))for u in range(3)]for i in range(3)]