p=lambda g,R=range(18):(u:=[*map(max,g)].index(1,1))and[[max(max(r[j%u::u])for r in g[i%u::u])for j in R]for i in R]