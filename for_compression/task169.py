def p(u):
 e=lambda g,s,r:1+sum(r[d].__setitem__(b,-1)or e(d,b,r)for t,o in zip((1,-1,0,0),(0,0,1,-1))if 10>(d:=g+t)>-1<(b:=s+o)<10and r[d][b]>4)
 return[[u[g][s]and 6-e(g,s,[*map(list,u)])for s in range(10)]for g in range(10)]
