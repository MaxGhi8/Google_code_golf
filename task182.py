def p(g,R=range):
 f=sum(g,[]);z=max(z+21for z in R(274)if f[z]==5==f[z+126]);t=sum(s:=[r[z%20:][:5]for r in g[z//20:][:5]],[])
 for i in R(256):
  y,x=i>>4,i&15
  for a in[*R(5)]*all(g[y+e//5][x+e%5]*max(t)==t[e]for e in R(25)):g[y+a][x:x+5]=s[a]
 return g