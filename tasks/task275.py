def p(g):x=min(n:=len(g),m:=len(g[0]));r=range(x*x);A,B=[(g[:m],g[m:]),zip(*((r[:n],r[n:])for r in g))][n<m];C,D=(A,B)if"8"in str(A)else(B,A);return[[C[i%x][j%x]and D[i//x][j//x]for j in r]for i in r]