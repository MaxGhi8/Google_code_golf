def p(g):r=lambda g:g*any(g[0])or r([*zip(*filter(any,g))]);x,c=zip(*((x,c)for c,a in enumerate(g)for x,p in enumerate(a)if p==4));d=[a[x[0]:x[3]+1]for a in g[c[0]:c[3]+1]];c=r([[p*(a<x[0]or a>x[3]or d<c[0]or d>c[3])for a,p in enumerate(a)]for d,a in enumerate(g)]);return max((sum(map(lambda x,c:0<x==c,sum(d,[]),sum(a:=[[4*(p==4)or([[*a]+[0]*99for a in c]+[[0]*99]*99)[(d-f)//x][(a-n)//x]for a,p in enumerate(a)]for d,a in enumerate(d)],[]))),-x,a)for x in[*range(12)][1:]for f in range(12)for n in range(12))[2]